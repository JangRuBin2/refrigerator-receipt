{
  "permissions": {
    "allow": [
      "Bash(npx create-next-app:*)",
      "Bash(npx create-next-app@latest apps/web --typescript --tailwind --eslint --app --src-dir --import-alias \"@/*\" --use-npm --no-turbopack)",
      "Bash(npm install:*)",
      "Bash(npm run build:*)",
      "Bash(timeout 10 npm run dev:*)",
      "Bash(curl:*)",
      "Bash(vercel --version:*)",
      "Bash(vercel --yes)",
      "Bash(vercel login)",
      "Bash(vercel --prod --yes:*)",
      "Bash(vercel inspect:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nInitial project setup: Next.js app with Supabase and Google Cloud Vision integration\n\nFridge Mate - receipt OCR based ingredient management service with Next.js 14, Tailwind CSS, Supabase auth/DB, and Google Cloud Vision API scaffolding.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(node -e \"\nconst url = ''https://jkyvgzfpxghywrfifhel.supabase.co'';\nfetch\\(url + ''/rest/v1/'', {\n  headers: {\n    ''apikey'': ''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpreXZnemZweGdoeXdyZmlmaGVsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk0OTQ2MTYsImV4cCI6MjA4NTA3MDYxNn0.2vyvUQNhkKL8SCieBWxVTwQ0EkGenlQnCkkqeWPaRBM''\n  }\n}\\).then\\(r => {\n  console.log\\(''Status:'', r.status\\);\n  return r.json\\(\\);\n}\\).then\\(d => console.log\\(''Response:'', JSON.stringify\\(d\\).substring\\(0,200\\)\\)\\)\n.catch\\(e => console.error\\(''Error:'', e.message\\)\\);\n\")",
      "Bash(node -e \"\nconst url = ''https://jkyvgzfpxghywrfifhel.supabase.co'';\nconst key = ''eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpreXZnemZweGdoeXdyZmlmaGVsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2OTQ5NDYxNiwiZXhwIjoyMDg1MDcwNjE2fQ.0MTEqq7daD8FNhPhhISzw59w0cA37qB1whEv2VQ-lRU'';\nconst tables = [''profiles'',''ingredients'',''recipes'',''user_favorites'',''receipt_scans''];\nPromise.all\\(tables.map\\(t =>\n  fetch\\(url + ''/rest/v1/'' + t + ''?limit=0'', {\n    headers: { ''apikey'': key, ''Authorization'': ''Bearer '' + key }\n  }\\).then\\(r => \\({ table: t, status: r.status }\\)\\)\n\\)\\).then\\(r => r.forEach\\(x => console.log\\(x.table + '': '' + \\(x.status === 200 ? ''OK'' : ''FAIL \\('' + x.status + ''\\)''\\)\\)\\)\\);\n\")",
      "Bash(git commit:*)",
      "WebFetch(domain:goddaehee.tistory.com)",
      "WebSearch",
      "WebFetch(domain:developers-apps-in-toss.toss.im)",
      "WebFetch(domain:github.com)",
      "Bash(node -e:*)",
      "Bash(npx tsc:*)",
      "Bash(git push:*)",
      "Bash(ls:*)",
      "Bash(wc:*)",
      "Bash(test:*)",
      "Bash(npx supabase:*)",
      "Bash(npx ait:*)",
      "Bash(npm search:*)",
      "Bash(npx @apps-in-toss/cli:*)",
      "Bash(npx granite:*)",
      "Bash(grep:*)",
      "Bash(unzip:*)",
      "Bash(then echo \"=== $f has process.env ===\")",
      "Bash(echo:*)",
      "Bash(fi)",
      "Bash(done)",
      "Bash(then echo \"=== $f ===\")",
      "Bash(then echo \"=== $f has Node.js APIs ===\")",
      "Bash(# d.u is empty function and d.p is \"\"/_next/\"\". Check if lazy-loaded chunks use this path. # Check what chunks are lazily loaded \\(not present in initial HTML\\) # Let''s see if the layout chunk loads any sub-chunks dynamically unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait \"\"web/_next/static/chunks/app/[locale]/layout-55d6096b2f45c27d.js\"\")",
      "WebFetch(domain:raw.githubusercontent.com)",
      "Bash(# Try with escaped brackets unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait ''web/_next/static/chunks/app/[locale]/layout-55d6096b2f45c27d.js'')",
      "Bash(# Try extracting with wildcard unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait ''web/_next/static/chunks/app/*/layout-55d6096b2f45c27d.js'')",
      "Bash(# Get full AuthGuard code unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait ''web/_next/static/chunks/app/*/layout-55d6096b2f45c27d.js'')",
      "Bash(# Check how createClient \\(module 8933 from AuthGuard\\) is used in the bundle unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait ''web/_next/static/chunks/861-923cfc02999ca630.js'')",
      "Bash(# Find the actual Supabase createClient function in the bundle \\(module 8933\\) unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait ''web/_next/static/chunks/861-923cfc02999ca630.js'')",
      "Bash(# Get the full 8933 module unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait ''web/_next/static/chunks/861-923cfc02999ca630.js'')",
      "Bash(python3:*)",
      "Bash(# Let me re-read the AuthGuard code from source\n)",
      "Bash(# Check if ko.html has the polyfills and framework scripts unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait web/ko.html)",
      "Bash(# Check if framework chunk is loaded somewhere unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait web/ko.html)",
      "Bash(# Check if the pages chunks also reference the framework unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait web/ko.html)",
      "Bash(# Search for how the web-framework handles web/ directory and index.html serving grep -r ''index.html\\\\|web/'' /Users/rubinjang/web/acorn/refrigerator-receipt/node_modules/@apps-in-toss/web-framework/dist/cli/chunk-7C73ZI2P.js)",
      "Bash(# Check the lib for how it packages web content grep -o ''.{0,60}index\\\\.html.{0,60}'' /Users/rubinjang/web/acorn/refrigerator-receipt/node_modules/@apps-in-toss/web-framework/dist/cli/lib-QJ7JCU6G.js)",
      "Bash(# Search the production iOS bundle for how it serves web content \\(index.html loading\\) grep -o ''.\\\\{0,80\\\\}index\\\\.html.\\\\{0,80\\\\}'' /Users/rubinjang/web/acorn/refrigerator-receipt/node_modules/@apps-in-toss/web-framework/dist/prebuilt/prod.ios.js)",
      "Bash(# Search for how the bundle.ios.js starts the app and where the webview source comes from grep -n ''registerApp\\\\|createApp\\\\|App.*register\\\\|webview.*source\\\\|source.*uri\\\\|getInitialURL\\\\|initialUrl'' /Users/rubinjang/web/acorn/refrigerator-receipt/out/acorn.ios.js)",
      "Bash(# Search for where the WebView gets its source/URL for the local web content grep -n ''web.*index\\\\|web.*html\\\\|webDir\\\\|webRoot\\\\|webPath\\\\|assetsDir\\\\|DocumentDir\\\\|CachesDir'' /Users/rubinjang/web/acorn/refrigerator-receipt/out/acorn.ios.js)",
      "Bash(# Check if ko.html has proper self-contained HTML vs references to external CDN unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait web/ko.html)",
      "Bash(# Check if the Pretendard font CSS is a blocking resource unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait web/ko.html)",
      "Bash(# Check if localStorage is available in Toss WebView - look for localStorage usage unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait web/_next/static/chunks/app/page-fd68cd008f7047b8.js)",
      "Bash(# Verify how the main-bbec9bd66563fde8.js \\(pages router main\\) and framework chunk are loaded # They exist in the .ait but are not referenced in ko.html - check if they''re referenced from anywhere unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait ''web/_next/static/chunks/main-bbec9bd66563fde8.js'')",
      "Bash(# Check pages router references - they are for fallback _error pages unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait web/404.html)",
      "Bash(# Check if _buildManifest and _ssgManifest are loaded in index.html unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait web/index.html)",
      "Bash(# Check if _buildManifest and _ssgManifest are loaded in ko.html unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait web/ko.html)",
      "Bash(# Check if the RSC payload in index.html has ALL necessary data for hydration unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait web/index.html)",
      "Bash(# For comparison, check ko.html structure unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait web/ko.html)",
      "Bash(# Check if index.html renders any visible content unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait web/index.html)",
      "Bash(# Check the Next.js router behavior for static export # In App Router, router.replace triggers a soft navigation that loads the target RSC payload # For static export, this means it needs to fetch the target page''s RSC data # Let''s check how the router resolves routes # Check if there''s a flight router state in the RSC payload unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait web/index.html)",
      "Bash(# In Next.js App Router static export, router.replace\\(\\) triggers a full page navigation # or a fetch to the RSC endpoint. Check if there''s an RSC data file # In static export, the router does a full MPA navigation to the target HTML file # So router.replace\\(\"\"/ko\"\"\\) would navigate the browser to /ko which maps to ko.html # Let''s verify the .txt files exist \\(these are the RSC payloads for client-side navigation\\) unzip -l /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait)",
      "Bash(# Check for the .txt RSC payload content for index unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait web/index.txt)",
      "Bash(# Check how Next.js static export handles client-side navigation # Look at the main-app chunk for the navigation logic unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait ''web/_next/static/chunks/117-80ab991f8118ffad.js'')",
      "Bash(# Search for how Next.js resolves RSC payloads for static export unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait ''web/_next/static/chunks/117-80ab991f8118ffad.js'')",
      "Bash(# Find how .txt files are fetched - this is the static export RSC mechanism unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait ''web/_next/static/chunks/117-80ab991f8118ffad.js'')",
      "Bash(# Count how many __next_f pushes in ko.html for comparison unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait web/ko.html)",
      "Bash(# Check the number of script tags in each echo \"\"index.html script count:\"\" unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait web/index.html)",
      "Bash(# Check if @supabase/ssr createBrowserClient has any cookie/storage dependencies # that might fail in WebView grep -r ''createBrowserClient'' /Users/rubinjang/web/acorn/refrigerator-receipt/node_modules/@supabase/ssr/dist/)",
      "Bash(# Check ko/login.html exists and its structure unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait web/ko/login.html)",
      "Bash(# Let''s check the Next.js static export RSC fetch URL format more precisely unzip -p /Users/rubinjang/web/acorn/refrigerator-receipt/acorn.ait ''web/_next/static/chunks/117-80ab991f8118ffad.js'')",
      "Bash(npx serve --version)",
      "Bash(open:*)",
      "Bash(AIT_DEBUG=true npx granite build:*)",
      "Bash(cat:*)",
      "Bash(cmp:*)",
      "Bash(md5:*)",
      "Bash(git log:*)",
      "Bash(npm run build:ait:*)",
      "Bash(npx next build:*)",
      "Bash(node scripts/fix-root-html.mjs:*)"
    ]
  }
}
